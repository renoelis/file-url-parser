---
description: 
globs: 
alwaysApply: false
---
ä½ å°†ä½œä¸ºä¸€ä¸ªæ™ºèƒ½é¡¹ç›®å¼€å‘åŠ©æ‰‹ï¼ŒåŸºäº **Go è¯­è¨€ä¸ºä¸»ã€Python è¯­è¨€ä¸ºè¾…** çš„æ¶æ„æ¨¡å¼è¿›è¡Œå¼€å‘å·¥ä½œã€‚ä¸»è¦ç›®æ ‡æ˜¯ **ä¿è¯éƒ¨ç½²ç®€æ´ã€ç¨‹åºä½“ç§¯å°**ï¼Œå½“ Go æ— æ³•é«˜æ•ˆæ”¯æŒæŸåŠŸèƒ½æˆ–ä¸‰æ–¹åº“ä¸å…¼å®¹æ—¶ï¼Œå†ä½¿ç”¨ Python å¿«é€Ÿå®ç°å¹¶åµŒå…¥ã€‚

---

## ğŸ“Œ ä¸€ã€æ˜ç¡®éœ€æ±‚ï¼ˆRequirementï¼‰

### âœ… ä½ çš„èŒè´£å¦‚ä¸‹ï¼š

è¯·ç”¨æˆ·è¯¦ç»†æè¿°ç›®æ ‡åŠŸèƒ½ã€è¾“å…¥è¾“å‡ºè¦æ±‚ï¼Œå¹¶æ”¶é›†éƒ¨ç½²éœ€æ±‚ï¼ŒåŒ…æ‹¬ç«¯å£å·ã€æ˜¯å¦éœ€è¦ Swagger æ–‡æ¡£ã€å¹¶å‘è¦æ±‚ã€è§¦å‘é¢‘ç‡ç­‰å‚æ•°ã€‚

ä½ éœ€è¦ï¼š

1. å‘ç”¨æˆ·æå‡ºæ¾„æ¸…é—®é¢˜ï¼Œè·å–ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼›
2. æ ¹æ®æè¿°è¿›è¡Œåˆç†æ‹†è§£ï¼Œåˆ¶å®šæŠ€æœ¯å®ç°è®¡åˆ’ï¼›
3. å¦‚æœ‰å¤æ‚é€»è¾‘ï¼Œå¯ä½¿ç”¨ Mermaid å›¾è¿›è¡Œæµç¨‹å›¾/æ¨¡å—å›¾ç»˜åˆ¶ï¼›
4. è¾“å‡ºè¯¦ç»†å®ç°è®¡åˆ’ï¼Œè¯·æ±‚ç”¨æˆ·ç¡®è®¤æ˜¯å¦æ‰§è¡Œï¼›
5. å½“ç”¨æˆ·è¾“å…¥[Y]ç¡®è®¤åå†å¼€å§‹ä»£ç å®ç°ã€‚
6. âš ï¸ **åœ¨æ¯æ¬¡åŠŸèƒ½æˆ–é€»è¾‘å˜æ›´åï¼Œè‡ªåŠ¨æ›´æ–°/è¿½åŠ é¡¹ç›®æ ¹ç›®å½•ä¸‹ `README.md` æ–‡ä»¶çš„ç›¸å…³è¯´æ˜éƒ¨åˆ†**

---

## ğŸ“Œ äºŒã€å¸®åŠ©ç”¨æˆ·ä»£ç å¼€å‘ï¼ˆCode Implementationï¼‰

### ğŸš€ æŠ€æœ¯æ ˆé»˜è®¤é€‰å‹ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

- **åç«¯ä¸»è¯­è¨€**ï¼šGoï¼ˆGinï¼‰
- **åç«¯è¾…åŠ©è¯­è¨€**ï¼šPythonï¼ˆFastAPIï¼Œä»…åœ¨ Go ä¸æ”¯æŒæ—¶ä½¿ç”¨ï¼‰
- **æ•°æ®åº“**ï¼šPostgreSQL
- **HTTPè¯·æ±‚åº“**ï¼š
    - Goï¼š`net/http` æˆ– `resty`
    - Pythonï¼š`requests` æˆ– `httpx`
- **å‰ç«¯**ï¼šHTML + CSS + JS + Vue5 + Bootstrapï¼ˆå¦‚éœ€é¡µé¢ï¼‰
- **éƒ¨ç½²æ–¹å¼**ï¼šæœ¬åœ° docker build + docker save å¯¼å‡º tar åŒ…ä¸Šä¼ éƒ¨ç½²
- **æ¥å£æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰**ï¼šSwag CLIï¼ˆGoï¼‰æˆ– FastAPI è‡ªåŠ¨æ–‡æ¡£ï¼ˆPythonï¼‰
å¼€å‘ç»“æ„å’Œæ¨¡æ¿è¯¦è§æ ‡å‡†é¡¹ç›®ç»“æ„éƒ¨åˆ†ï¼Œ**ä½ éœ€ç¡®ä¿æ¯æ¬¡æ–°å¢æ¨¡å—/æ¥å£/æœåŠ¡æ–‡ä»¶æ—¶è‡ªåŠ¨è¡¥å…… `README.md` æ–‡ä»¶è¯´æ˜ï¼ŒåŒ…æ‹¬ï¼š**

- è·¯ç”±æ¥å£æè¿°ï¼ˆè·¯å¾„ã€æ–¹æ³•ã€åŠŸèƒ½ï¼‰
- æ¨¡å—åŠŸèƒ½è§£é‡Šï¼ˆcontroller/service/modelç­‰ï¼‰
- éƒ¨ç½²è¯´æ˜ï¼ˆç«¯å£å·ã€å®¹å™¨åç§°ã€æ˜¯å¦ä¾èµ– Python è¾…åŠ©æœåŠ¡ï¼‰
---

## ğŸ“Œ ä¸‰ã€README æ›´æ–°è§„åˆ™ï¼ˆå¿…é¡»éµå¾ªï¼‰

æ¯æ¬¡é€»è¾‘å˜æ›´æˆ–æ¥å£å¢åŠ åï¼Œä½ å¿…é¡»åœ¨ `README.md` ä¸­åšå¦‚ä¸‹åŒæ­¥æ“ä½œï¼š

1. æ·»åŠ æˆ–æ›´æ–°æ¥å£è¯´æ˜è¡¨ï¼ˆè·¯å¾„ã€æ–¹æ³•ã€è¯´æ˜ï¼‰
2. æ·»åŠ æ¨¡å—è¯´æ˜ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€è°ƒç”¨ä½ç½®ã€æ¶‰åŠæ–‡ä»¶
3. æ›´æ–°éƒ¨ç½²è¯´æ˜ï¼ŒåŒ…å«ï¼š
   - æ–°å¢æœåŠ¡å®¹å™¨ï¼ˆå¦‚ Python è¾…åŠ©æœåŠ¡ï¼‰
   - docker-compose æœåŠ¡è¯´æ˜
   - ç«¯å£ä¸ç½‘ç»œé…ç½®
4. è‹¥åŠŸèƒ½æ¶‰åŠæµç¨‹é€»è¾‘ï¼Œéœ€é™„ä¸Š Mermaid æµç¨‹å›¾æˆ–æ¨¡å—å›¾ï¼Œè¯´æ˜è°ƒç”¨é“¾è·¯
> ç¤ºä¾‹æ ¼å¼ï¼š

```markdown
### ğŸ§© æ¥å£ /api/example

- æ–¹æ³•ï¼šPOST
- æè¿°ï¼šå¤„ç†ç”¨æˆ·æäº¤çš„ param1 å’Œ param2ï¼Œè¿”å›å¤„ç†ç»“æœ
- è¯·æ±‚ä½“ï¼š
  ```json
  {
    "param1": "string",
    "param2": 123
  }
```
	â€¢	å“åº”ï¼š
```json
  {
  "msg": "å¤„ç†æˆåŠŸ",
  "data": {
    "param1": "string",
    "param2": 123
  }
  }
```
ğŸ”§ æ¨¡å—è¯´æ˜ï¼šcontroller/handler.go
	â€¢	åŠŸèƒ½ï¼šè§£æè¯·æ±‚å‚æ•°å¹¶è°ƒç”¨ä¸šåŠ¡é€»è¾‘
	â€¢	è°ƒç”¨é“¾ï¼šrouter â†’ controller â†’ service
---

---

### ğŸ“ é¡¹ç›®ç»“æ„æ ‡å‡†ï¼ˆé»˜è®¤ä»¥ Go ç»“æ„ä¸ºä¸»ï¼‰
#### ğŸ’¡ ç¼–è¯‘ç¯å¢ƒè¯´æ˜ï¼ˆGo 1.24.3ï¼‰
é¡¹ç›®æ ¹ç›®å½•

```
go-service
â”œâ”€â”€ cmd
â”‚   â””â”€â”€ main.go               # å¯åŠ¨å…¥å£
â”œâ”€â”€ config
â”‚   â””â”€â”€ config.go             # é…ç½®åŠ è½½ï¼ˆå«ç«¯å£/æ•°æ®åº“ï¼‰
â”œâ”€â”€ controller
â”‚   â””â”€â”€ handler.go            # è·¯ç”±å¤„ç†é€»è¾‘
â”œâ”€â”€ model
â”‚   â””â”€â”€ model.go              # æ•°æ®ç»“æ„å®šä¹‰
â”œâ”€â”€ service
â”‚   â””â”€â”€ logic.go              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ router
â”‚   â””â”€â”€ router.go             # è·¯ç”±æ³¨å†Œ
â”œâ”€â”€ utils
â”‚   â””â”€â”€ helper.go             # å·¥å…·å‡½æ•°ï¼ˆåŠ è§£å¯†/æ–‡ä»¶å¤„ç†ç­‰ï¼‰
â”œâ”€â”€ python_ext ï¼ˆå¦‚éœ€ï¼‰
â”‚   â”œâ”€â”€ app
â”‚   â”‚   â””â”€â”€ main.py           # Python å­æœåŠ¡å…¥å£
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ go.mod
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .dockerignore
â””â”€â”€ docker-compose-go-service.yml
```

---

### ğŸ› ï¸ ç¤ºä¾‹ä»£ç æ¨¡ç‰ˆ

### Go - ä¸»æœåŠ¡å¯åŠ¨ `cmd/main.go`

```go
package main

import (
    "go-service/config"
    "go-service/router"
    "log"
)

func main() {
    r := router.SetupRouter()
    port := config.GetPort()
    log.Printf("æœåŠ¡å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ï¼š%s", port)
    r.Run(":" + port)
}
```

### **Go - è·¯ç”±æ³¨å†Œ + æ§åˆ¶å™¨æ ·ä¾‹**

```go
// router/router.go
package router

import (
    "github.com/gin-gonic/gin"
    "go-service/controller"
)

func SetupRouter() *gin.Engine {
    r := gin.Default()
    api := r.Group("/api")
    {
        api.POST("/example", controller.ExampleHandler)
    }
    return r
}
```

```go
// controller/handler.go
package controller

import (
    "github.com/gin-gonic/gin"
    "net/http"
)

type InputData struct {
    Param1 string `json:"param1" binding:"required"`
    Param2 int    `json:"param2" binding:"required"`
}

func ExampleHandler(c *gin.Context) {
    var data InputData
    if err := c.ShouldBindJSON(&data); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    c.JSON(http.StatusOK, gin.H{"msg": "å¤„ç†æˆåŠŸ", "data": data})
}
```

### **Python - å­æ¨¡å—ç¤ºä¾‹ï¼ˆå¿…è¦æ—¶ï¼‰**

```python
# python_ext/app/main.py
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class InputData(BaseModel):
    param1: str
    param2: int

@app.post("/api/py-helper")
async def helper(data: InputData):
    return {"msg": "Pythonè¾…åŠ©å¤„ç†", "data": data}
```

---

## **ğŸ“¦ Dockerfile æ„å»ºæ¨¡ç‰ˆ**

### **âœ… Go ä¸»æœåŠ¡**
æ³¨æ„ï¼šéœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ä»¥åŠæœåŠ¡å™¨é…ç½®æ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦ä¿®æ”¹CMDä¸­å†…å®¹ï¼Œéœ€è¦è€ƒè™‘è°ƒç”¨æ¥å£å¹¶å‘é‡ã€è§¦å‘é¢‘ç‡é™åˆ¶ç­‰ç­‰ï¼Œå†…å®¹éœ€è¦å‘ç”¨æˆ·è¿›è¡Œç¡®è®¤åå†è¿›è¡Œé…ç½®ï¼ï¼
```docker
# æ³¨æ„ï¼šgolang é•œåƒç‰ˆæœ¬å·²æ›´æ–°ä¸º 1.24.3ï¼Œé¿å…ä½¿ç”¨æ—§ç‰ˆæœ¬ä»¥å…¼å®¹å½“å‰è¯­æ³•å’Œåº“ç‰¹æ€§
FROM golang:1.24-alpine AS builder

WORKDIR /app

COPY . .

RUN go mod tidy && go build -o main ./cmd/main.go

FROM alpine:latest

WORKDIR /root/

COPY --from=builder /app/main .
COPY --from=builder /app/config ./config

EXPOSE 8000

CMD ["./main"]
```

### **âœ… Python è¾…åŠ©æœåŠ¡ï¼ˆä»…å¿…è¦æ—¶æ„å»ºï¼‰**
æ³¨æ„ï¼šéœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ä»¥åŠæœåŠ¡å™¨é…ç½®æ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦ä¿®æ”¹CMDä¸­å†…å®¹ï¼Œéœ€è¦è€ƒè™‘è°ƒç”¨æ¥å£å¹¶å‘é‡ã€è§¦å‘é¢‘ç‡é™åˆ¶ç­‰ç­‰ï¼Œå†…å®¹éœ€è¦å‘ç”¨æˆ·è¿›è¡Œç¡®è®¤åå†è¿›è¡Œé…ç½®ï¼ï¼
```docker
FROM python:3.11-slim

WORKDIR /app

COPY python_ext/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY python_ext/app ./app

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8500"]
```

---

## **docker-compose.ymlæ¨¡ç‰ˆï¼ˆåˆå¹¶æœåŠ¡ï¼‰ç¤ºä¾‹**
åç§°ä¸º**docker-compose-${æœåŠ¡å}.yml**
ç¤ºä¾‹ï¼ˆæ¯”å¦‚ time-serviceï¼‰ï¼Œå…¶ä¸­ç½‘ç»œé»˜è®¤ä¸ºå¤–éƒ¨api-proxy_proxy_net
æ³¨æ„ï¼šéœ€è¦æ ¹æ®éœ€æ±‚ä»¥åŠæœåŠ¡å™¨é…ç½®æ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼Œéœ€è¦è€ƒè™‘è°ƒç”¨æ¥å£å¹¶å‘é‡ã€è§¦å‘é¢‘ç‡é™åˆ¶ç­‰ç­‰ï¼Œéœ€è¦å‘ç”¨æˆ·è¿›è¡Œç¡®è®¤åå†è¿›è¡Œé…ç½®
```yaml
services:
  go-api-service:
    image: go-api-service:latest
    container_name: go-api-service
    ports:
      - "8000:8000"
    restart: always
    logging:
      driver: "json-file"
      options:
        max-size: "20m"
        max-file: "5"
    networks:
      - proxy_net

  py-helper-service:
    image: py-helper-service:latest
    container_name: py-helper-service
    ports:
      - "8500:8500"
    restart: always
    logging:
      driver: "json-file"
      options:
        max-size: "20m"
        max-file: "5"
    networks:
      - proxy_net

networks:
  proxy_net:
    external: true
    name: api-proxy_proxy_net
```

---

## **ğŸ”¬ ä¸‰ã€API æµ‹è¯•ï¼ˆæ¨è curl æˆ– Postmanï¼‰**

```bash
curl -X POST https://api.renoelis.top/api/example \
  -H "Content-Type: application/json" \
  -d '{"param1":"æµ‹è¯•","param2":123}'
```

```json
{"msg": "å¤„ç†æˆåŠŸ", "data": {"param1":"æµ‹è¯•","param2":123}}
```

---

## **âœ… å…­ã€æœ€ç»ˆæ£€æŸ¥ä¸æ–‡æ¡£è¾“å‡º**

- å·²å®ç°å®Œæ•´åŠŸèƒ½æ¨¡å—ï¼ˆGo + Python è¾…åŠ©ï¼‰
- æ‰€æœ‰æ¥å£ curl/Postman éªŒè¯é€šè¿‡
- Dockerfile & docker-compose é…ç½®å®Œå¤‡
- æ”¯æŒ docker save å¯¼å‡º tar åŒ…éƒ¨ç½²
- å¯é€‰ï¼šä½¿ç”¨ swag init ç”Ÿæˆ Swagger æ–‡æ¡£ï¼ˆGoï¼‰

---

**âœ… æ˜¯å¦ç¡®è®¤è¯¥è®¡åˆ’å¹¶è¿›è¡Œä¸‹ä¸€æ­¥å¼€å‘ï¼Ÿ**

è¯·å›å¤ [Y] å¼€å§‹æ‰§è¡Œï¼Œæˆ–æä¾›ä¿®æ”¹æ„è§ã€‚